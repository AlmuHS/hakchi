if [ "$hakchi_partial_first" == "y" ]; then

  if [ "$hakchi_remove_games" == "y" ]; then
    echo Removing all games...
    rm -rf $rootfs/usr/share/games/nes/kachikachi/*
  fi

  if [ "$hakchi_original_games" == "y" ]; then
    echo Transfering original games...
    for dir in $mountpoint/usr/share/games/nes/kachikachi/*; do
      if [ -d $dir ]; then
        code=`echo $dir | sed "s/.*\///"`
        if [ -f /$modname/hidden_games ] && grep -q $code /$modname/hidden_games; then
          echo $code is hidden
        else
          echo Transfering $code
          found=false
          for p in /games/gpath-$code-*; do
            if [ -f "$p" ]; then
              dist=`cat $p`
              mkdir -p $rootfs/usr/share/games/nes/kachikachi/$dist
              echo ...to $rootfs/usr/share/games/nes/kachikachi/$dist
              cp -a $mountpoint/usr/share/games/nes/kachikachi/$code $rootfs/usr/share/games/nes/kachikachi/$dist
              rm $p
              found=true
            fi
          done
          if [ "$found" == "false" ]; then
            echo There is no path file for $code
            cp -a $mountpoint/usr/share/games/nes/kachikachi/$code $rootfs/usr/share/games/nes/kachikachi/
          fi
        fi
      fi
    done
  fi

  if [ "$hakchi_remove_armet_original" == "y" ]; then
    echo "Removing armet filter..."
    find $rootfs/usr/share/games/nes/kachikachi -name *.desktop -exec sed -i -e 's/--enable-armet//g' {} +
  fi

  if [ -f $hakchi_extra_script ]; then
    echo Executing extra script...
    source $hakchi_extra_script
  fi

fi

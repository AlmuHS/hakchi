rand(){
  hexdump -e '"%x"' -n 4 /dev/urandom
}

source_parts(){
  script=$temppath/script_$(rand)
  rm -f "$script"
  for i in $(find $(dirname "$1") -maxdepth 1 -path "$1" | sort); do
    cat "$i" >> "$script"
  done
  source "$script"
  rm -f "$script"
}

preinit(){
  source_parts "$preinitpath/p????_*"
}

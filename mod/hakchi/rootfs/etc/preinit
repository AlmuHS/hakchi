rand(){
  hexdump -e '"%x"' -n 4 /dev/urandom
}

source_parts(){
  local script=$temppath/script_$(rand)
  rm -f "$script"
  for i in $(find $(dirname "$1") -maxdepth 1 -path "$1" | sort); do
    cat "$i" >> "$script"
  done
  source "$script"
  local ret=$?
  rm -f "$script"
  return $ret
}

preinit(){
  source_parts "$preinitpath/p????_*"
}
